import{b as tt,a as st}from"./index-1e985a02.js";/* empty css                *//* empty css                 *//* empty css                    *//* empty css                  */import{i as ne,L as $e}from"./echarts-6d655a86.js";import{_ as ot}from"./leaflet-f9f0bb1a.js";import{l as xe,r as C,M as at,N as lt,y as N,z as f,A as h,B as t,Y as p,C as n,D as d,P as H,O as ie,ab as z,ac as O,a5 as $,n as nt,K as it,aa as rt,aq as ct,ar as dt,as as ut,at as pt,au as mt,an as vt,ai as ft,av as gt,Q as _t,_ as re,R as ce,G as ht,L as yt,ap as bt,ao as $t,Z as xt,aw as wt,ax as Ct}from"./element-plus-ec4a33e2.js";const kt={class:"analytics-view"},St={class:"analytics-container"},Ft={class:"overview-grid"},Dt={class:"stat-number"},It={class:"info-icon"},Et={class:"stat-number"},Mt={class:"info-icon"},At={class:"stat-number"},zt={class:"info-icon"},Rt={class:"stat-number"},Nt={class:"info-icon"},Ot={class:"stat-number"},Vt={class:"info-icon"},Bt={class:"stat-number"},Lt={class:"info-icon"},Pt={class:"card"},Tt={class:"card-header"},jt={class:"feature-controls"},Ut={class:"card-body"},Gt={class:"chart-container"},Jt={key:0,class:"feature-comparison-section"},Kt={class:"comparison-grid"},Ht={class:"feature-card"},Yt={class:"feature-name"},Wt={class:"feature-score"},Xt={class:"feature-bar"},qt={class:"feature-desc"},Qt={class:"insights-section"},Zt={class:"insights-content"},es={class:"insight-details"},ts={class:"charts-grid"},ss={class:"card"},os={class:"card-body"},as={class:"chart-container"},ls={class:"card"},ns={class:"card-body"},is={class:"chart-container"},rs={class:"card"},cs={class:"card-body"},ds={class:"chart-container"},us={class:"card"},ps={class:"card-body"},ms={class:"cluster-info"},vs={class:"cluster-description"},fs={class:"algorithm-info"},gs={class:"quality-indicator"},_s={class:"description-content"},hs={key:0},ys={key:1},bs={class:"axis-explanation-enhanced"},$s={class:"axis-details"},xs={class:"axis-item"},ws={class:"axis-item"},Cs={class:"business-insights"},ks={class:"insight-grid"},Ss={class:"insight-title"},Fs={class:"insight-content"},Ds={class:"insight-value"},Is={class:"interaction-tip"},Es={class:"cluster-analysis-container"},Ms={class:"cluster-chart-wrapper"},As={class:"cluster-filter-controls"},zs={class:"filter-group"},Rs={style:{display:"flex","align-items":"center"}},Ns={class:"cluster-explanation"},Os={class:"cluster-features-list"},Vs={class:"cluster-detail"},Bs={class:"cluster-tags"},Ls={class:"restaurant-list-container"},Ps={class:"restaurant-count"},Ts={class:"count-num"},js={class:"restaurant-list"},Us=["onClick","onMouseover"],Gs={class:"restaurant-info"},Js={class:"restaurant-name"},Ks={class:"restaurant-meta"},Hs={class:"stars"},Ys={key:0,class:"no-restaurants"},Ws={class:"card"},Xs={class:"card-body"},qs={class:"importance-value"},Qs={key:0,class:"restaurant-detail-content"},Zs={class:"restaurant-header"},eo={class:"restaurant-stars"},to={class:"restaurant-features"},so={class:"feature-tags"},oo={class:"restaurant-description"},ao={class:"dialog-footer",style:{"margin-top":"24px","text-align":"right"}},lo={class:"stat-explanation-content"},no={__name:"Analytics",setup(io){const W=tt.create({baseURL:"http://localhost:5000",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}),Ee=o=>{try{const e=o.replace(/:\s*NaN\s*([,}])/g,": null$1");return JSON.parse(e)}catch(e){return console.error("JSON解析失败:",e),null}},X=st(),q=xe(()=>X.loading),y=C({}),U=C({}),D=C([]),Q=C({});let V=null,Z=null,P=null,T=null,M=null;const de=["success","info","warning","danger"],ue=C("horizontal"),pe=C(!1),we=xe(()=>{const o=y.value.silhouette_score||.436;return Math.round(o*5)}),Me=xe(()=>D.value.slice(0,10)),me=C(!1),Ce=C(""),I=C([{name:"聚类 1",color:"#5470c6",description:"高端餐厅",tags:["高价位","精致装修","顶级服务"]},{name:"聚类 2",color:"#91cc75",description:"欧式餐厅",tags:["中高价位","欧洲菜系","传统风格"]},{name:"聚类 3",color:"#fac858",description:"现代创新餐厅",tags:["高价位","创新菜系","现代设计"]},{name:"聚类 4",color:"#ee6666",description:"地中海风格餐厅",tags:["中价位","地中海菜系","特色位置"]},{name:"聚类 5",color:"#73c0de",description:"亚洲风味餐厅",tags:["中价位","亚洲菜系","城市位置"]},{name:"聚类 6",color:"#3ba272",description:"美式创新餐厅",tags:["中高价位","美式菜系","时尚氛围"]},{name:"聚类 7",color:"#fc8452",description:"地方特色餐厅",tags:["中价位","地方菜系","文化特色"]}]),ee=C(""),te=C(""),se=C(""),A=C([]),G=C([]),ye=C(null),F=C(null),ve=C(!1),Ae=async()=>{try{X.loading=!0;const[o,e]=await Promise.allSettled([W.get("/api/analytics/clustering"),W.get("/api/analytics/features")]);if(o.status==="fulfilled"&&o.value.data){const s=o.value.data;s.success!==!1&&s.data?y.value=s.data:s.algorithm?y.value=s:(console.warn("聚类分析数据格式不正确，使用默认值"),y.value={algorithm:"DBSCAN",n_clusters:28,silhouette_score:.436,summary:"聚类分析数据（默认）"})}else console.warn("聚类分析数据获取失败，使用默认值"),y.value={algorithm:"DBSCAN",n_clusters:28,silhouette_score:.436,summary:"聚类分析数据（默认）"};if(e.status==="fulfilled"&&e.value.data){const s=e.value.data;s.success!==!1&&s.data?(U.value=s.data,D.value=s.data.features||[]):s.features?(U.value=s,D.value=s.features||[]):(console.warn("特征分析数据格式不正确，使用默认值"),U.value={model_accuracy:.85,total_features:157,selected_features:10},D.value=[{name:"价格水平",importance:.72,description:"餐厅的价格等级"},{name:"地理位置",importance:.68,description:"餐厅的地理位置"},{name:"菜系类型",importance:.62,description:"餐厅的菜系分类"},{name:"星级分布",importance:.58,description:"米其林星级的分布特征"},{name:"餐厅名称长度",importance:.54,description:"餐厅名称长度的影响"},{name:"大陆分布",importance:.48,description:"不同大陆的分布影响"},{name:"城市集中度",importance:.42,description:"餐厅在城市中的集中程度"},{name:"获奖年份趋势",importance:.38,description:"获得星级年份的趋势"},{name:"地理区域分布",importance:.34,description:"地理区域的多样性"},{name:"菜系多样性",importance:.28,description:"菜系类型的丰富程度"}])}else console.warn("特征分析数据获取失败，使用默认值"),U.value={model_accuracy:.85,total_features:157,selected_features:10},D.value=[{name:"价格水平",importance:.72,description:"餐厅的价格等级"},{name:"地理位置",importance:.68,description:"餐厅的地理位置"},{name:"菜系类型",importance:.62,description:"餐厅的菜系分类"},{name:"星级分布",importance:.58,description:"米其林星级的分布特征"},{name:"餐厅名称长度",importance:.54,description:"餐厅名称长度的影响"},{name:"大陆分布",importance:.48,description:"不同大陆的分布影响"},{name:"城市集中度",importance:.42,description:"餐厅在城市中的集中程度"},{name:"获奖年份趋势",importance:.38,description:"获得星级年份的趋势"},{name:"地理区域分布",importance:.34,description:"地理区域的多样性"},{name:"菜系多样性",importance:.28,description:"菜系类型的丰富程度"}];await ze()}catch(o){console.error("获取分析数据失败:",o),y.value={algorithm:"DBSCAN",n_clusters:28,silhouette_score:.436,summary:"聚类分析数据（离线模式）"},U.value={model_accuracy:.85,total_features:157,selected_features:10},D.value=[{name:"价格水平",importance:.72,description:"餐厅的价格等级"},{name:"地理位置",importance:.68,description:"餐厅的地理位置"},{name:"菜系类型",importance:.62,description:"餐厅的菜系分类"},{name:"星级分布",importance:.58,description:"米其林星级的分布特征"},{name:"餐厅名称长度",importance:.54,description:"餐厅名称长度的影响"},{name:"大陆分布",importance:.48,description:"不同大陆的分布影响"},{name:"城市集中度",importance:.42,description:"餐厅在城市中的集中程度"},{name:"获奖年份趋势",importance:.38,description:"获得星级年份的趋势"},{name:"地理区域分布",importance:.34,description:"地理区域的多样性"},{name:"菜系多样性",importance:.28,description:"菜系类型的丰富程度"}]}finally{X.loading=!1}},ze=async()=>{try{const e=["price","region","cuisine"].map(i=>W.get(`/api/analytics/distribution?type=${i}`)),s=await Promise.allSettled(e);Q.value={price:s[0].status==="fulfilled"&&s[0].value.data?s[0].value.data.success!==!1&&s[0].value.data.data||s[0].value.data:{$:98,$$:145,$$$:187,$$$$:213,$$$$$:142},region:s[1].status==="fulfilled"&&s[1].value.data?s[1].value.data.success!==!1&&s[1].value.data.data||s[1].value.data:{"United Kingdom":162,California:90,"New York City":74},cuisine:s[2].status==="fulfilled"&&s[2].value.data?s[2].value.data.success!==!1&&s[2].value.data.data||s[2].value.data:{Modern:76,French:65,Japanese:54}}}catch(o){console.error("获取分布数据失败:",o),Q.value={price:{$:98,$$:145,$$$:187,$$$$:213,$$$$$:142},region:{"United Kingdom":162,California:90,"New York City":74},cuisine:{Modern:76,French:65,Japanese:54}}}},ke=()=>{const o=document.getElementById("feature-importance-chart");if(!o)return;V=ne(o);const e=D.value.slice(0,10),s=ue.value==="horizontal",i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(a){const c=a[0],g=e[c.dataIndex];return`
          <div style="padding: 8px;">
            <div style="font-weight: bold; margin-bottom: 6px; color: #333;">
              ${g.name}
            </div>
            <div style="margin-bottom: 4px;">
              <span style="color: #666;">重要性得分：</span>
              <span style="font-weight: bold; color: #409EFF;">${(g.importance*100).toFixed(1)}%</span>
            </div>
            <div style="color: #666; font-size: 12px; line-height: 1.4;">
              ${g.description}
            </div>
          </div>
        `}},grid:{left:s?"15%":"10%",right:"10%",top:s?"10%":"15%",bottom:s?"10%":"15%"},xAxis:{type:s?"value":"category",name:s?"重要性得分":"",data:s?null:e.map(a=>a.name),max:s?1:null,axisLabel:{formatter:s?"{value}":function(a){return a.length>8?a.substring(0,8)+"...":a},interval:0,fontSize:11,rotate:s?0:30}},yAxis:{type:s?"category":"value",name:s?"":"重要性得分",data:s?e.map(a=>a.name):null,max:s?null:1,axisLabel:{interval:0,fontSize:11,formatter:function(a){return s&&typeof a=="string"&&a.length>12?a.substring(0,12)+"...":a}}},series:[{name:"特征重要性",type:"bar",data:e.map(a=>a.importance),itemStyle:{color:new $e(0,s?0:1,s?1:0,0,[{offset:0,color:"#667eea"},{offset:1,color:"#764ba2"}])},label:{show:!0,position:s?"right":"top",formatter:function(a){return(a.value*100).toFixed(1)+"%"},fontSize:10,color:"#333"},emphasis:{itemStyle:{color:new $e(0,s?0:1,s?1:0,0,[{offset:0,color:"#409EFF"},{offset:1,color:"#67C23A"}])}}}]};V.setOption(i),V.on("click",function(a){const c=e[a.dataIndex];yt({message:`${c.name}: ${c.description}`,type:"info",duration:3e3})})},Re=()=>{const o=document.getElementById("price-distribution-chart");if(!o)return;Z=ne(o);const e=Q.value.price||{},s=Object.entries(e).map(([a,c])=>({name:a,value:c})),i={tooltip:{trigger:"item",formatter:function(a){return`
          <div style="padding: 5px;">
            <div style="font-weight: bold; margin-bottom: 4px;">${a.name}</div>
            <div>餐厅数量: ${a.value}</div>
            <div>占比: ${a.percent}%</div>
          </div>
        `}},legend:{bottom:"0%",left:"center"},series:[{name:"价格分布",type:"pie",radius:["40%","70%"],center:["50%","45%"],data:s,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{color:function(a){const c=["#91cc75","#fac858","#ee6666","#73c0de","#3ba272"];return c[a.dataIndex%c.length]}}}]};Z.setOption(i)},Ne=()=>{const o=document.getElementById("region-distribution-chart");if(!o)return;P=ne(o);const e=Q.value.region||{},s=Object.entries(e).sort(([,a],[,c])=>c-a).slice(0,10),i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"15%",right:"10%",top:"10%",bottom:"15%"},xAxis:{type:"category",data:s.map(([a])=>a),axisLabel:{interval:0,rotate:45,fontSize:10}},yAxis:{type:"value",name:"餐厅数量"},series:[{name:"餐厅数量",type:"bar",data:s.map(([,a])=>a),itemStyle:{color:new $e(0,0,0,1,[{offset:0,color:"#667eea"},{offset:1,color:"#764ba2"}])}}]};P.setOption(i)},Oe=()=>{const o=document.getElementById("cuisine-analysis-chart");if(!o)return;T=ne(o);const e=Q.value.cuisine||{},s=Object.entries(e).sort(([,a],[,c])=>c-a).slice(0,15),i={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} 家餐厅"},legend:{type:"scroll",bottom:"0%",left:"center"},series:[{name:"菜系分布",type:"pie",radius:"70%",center:["50%","45%"],data:s.map(([a,c])=>({name:a,value:c})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{formatter:"{b}: {d}%"}}]};T.setOption(i)},Ve=()=>{const o=document.getElementById("cluster-scatter-chart");if(!o){console.error("找不到散点图DOM元素");return}M=ne(o);const s={tooltip:{trigger:"item",formatter:function(a){const c=a.value[2],g=a.value[3],m=A.value.find(v=>v.id===g);if(!m){const v=I.value.find(u=>u.id===c)||I.value[c>=0?c:6]||{name:"未知聚类",description:"无详细信息",tags:[]};return`
            <div style="padding: 5px;">
              <div style="font-weight: bold; margin-bottom: 5px;">${v.name}</div>
              <div style="margin-bottom: 5px;">${v.description}</div>
              <div>主成分1: ${a.value[0].toFixed(2)}</div>
              <div>主成分2: ${a.value[1].toFixed(2)}</div>
              <div style="margin-top: 5px; display: flex; flex-wrap: wrap; gap: 5px;">
                ${v.tags.map(u=>`<span style="background: rgba(64,158,255,.1); color: #409EFF; padding: 2px 5px; border-radius: 3px; font-size: 12px;">${u}</span>`).join("")}
              </div>
            </div>
          `}return`
          <div style="padding: 5px;">
            <div style="font-weight: bold; margin-bottom: 5px;">${m.name}</div>
            <div style="margin-bottom: 5px;">${m.cuisine} · ${m.location} · ${m.price}</div>
            <div style="margin-bottom: 5px;">
              ${'<span style="color: #f5a623;">★</span>'.repeat(m.stars)}
            </div>
            <div>主成分1: ${a.value[0].toFixed(2)}</div>
            <div>主成分2: ${a.value[1].toFixed(2)}</div>
            <div style="margin-top: 5px; font-size: 12px; color: #666;">点击查看详情</div>
          </div>
        `}},legend:{bottom:"0%",left:"center",type:"scroll",selected:{}},grid:{left:"10%",right:"10%",top:"10%",bottom:"15%"},xAxis:{type:"value",name:"主成分 1",scale:!0},yAxis:{type:"value",name:"主成分 2",scale:!0},series:(()=>{const a=[],c=I.value.map(g=>g.color);if(A.value.length===0)return console.warn("没有餐厅数据可用于散点图"),[];console.log(`准备为${A.value.length}家餐厅创建散点图数据`),console.log("聚类特征:",I.value);try{const g={};for(const u of A.value){const l=u.cluster;if(l==null){console.warn(`餐厅 ${u.name} 没有聚类标签`);continue}g[l]||(g[l]=[]),g[l].push(u)}console.log("聚类分组情况:",Object.keys(g).map(u=>({cluster:u,count:g[u].length})));for(let u=0;u<12;u++){const l=g[u]||[];if(l.length===0){console.log(`聚类 ${u} 没有餐厅数据`);continue}const _=I.value.find(x=>x.id===u)||{name:`聚类 ${u+1}`,color:c[u%c.length]||"#666"},w=l.map(x=>[x.pca1,x.pca2,u,x.id]);a.push({name:_.name,type:"scatter",data:w,symbolSize:8,itemStyle:{color:_.color}}),console.log(`为聚类 ${u} (${_.name}) 创建了 ${w.length} 个数据点`)}const m=g[12]||[];if(m.length>0){console.log(`发现 ${m.length} 个其他聚类的点`);const u=m.map(_=>[_.pca1,_.pca2,12,_.id]),l=I.value.find(_=>_.id===12)||{name:"其他聚类",color:"#999999"};a.push({name:l.name,type:"scatter",data:u,symbolSize:6,itemStyle:{color:l.color,opacity:.7}})}const v=g[-1]||[];if(v.length>0){console.log(`发现 ${v.length} 个噪声点`);const u=v.map(l=>[l.pca1,l.pca2,-1,l.id]);a.push({name:"噪声点",type:"scatter",data:u,symbolSize:4,itemStyle:{color:"#ccc",opacity:.5}})}return a}catch(g){return console.error("生成聚类数据时出错:",g),[]}})()},i=s.series||[];i.length>0&&(s.legend.selected={},i.forEach(a=>{s.legend.selected[a.name]=!0})),M.setOption(s),M.on("click",function(a){if(a.componentType==="series"){const c=a.value[3],g=A.value.find(m=>m.id===c);g?Fe(g):console.warn(`点击事件：找不到ID为 ${c} 的餐厅`)}}),console.log("聚类散点图初始化完成")},Be=async()=>{await nt(),await Le(),ke(),Re(),Ne(),Oe(),Ve(),window.addEventListener("resize",()=>{V==null||V.resize(),Z==null||Z.resize(),P==null||P.resize(),T==null||T.resize(),M==null||M.resize()})},Le=async()=>{try{X.loading=!0,console.log("开始获取餐厅数据...");const o=await W.get("/api/restaurants",{params:{per_page:1e3}});console.log("餐厅数据API响应:",o.status,o.data),console.log("response.data 类型:",typeof o.data);let e=o.data;typeof o.data=="string"&&(e=Ee(o.data),console.log("JSON解析成功，解析后的数据:",e)),console.log("responseData.data 存在吗?",!!(e!=null&&e.data)),console.log("responseData.restaurants 存在吗?",!!(e!=null&&e.restaurants)),e!=null&&e.data&&console.log("responseData.data.restaurants 存在吗?",!!e.data.restaurants);let s=null;if(e&&e.data&&e.data.restaurants?(s=e.data.restaurants,console.log("使用路径: responseData.data.restaurants")):e&&e.restaurants&&(s=e.restaurants,console.log("使用路径: responseData.restaurants")),s&&s.length>0){console.log(`成功获取 ${s.length} 家餐厅数据`);const i=s.map(c=>({...c,latitude:c.latitude||0,longitude:c.longitude||0,price:c.price||"$$",stars:c.stars||1})),a=await Te(i);A.value=a,G.value=[...a],console.log(`处理后共有 ${a.length} 家餐厅`)}else console.error("API返回数据格式不正确，使用模拟数据替代",e),A.value=fe(),G.value=[...A.value]}catch(o){console.error("获取餐厅数据详细错误:",o),console.error("错误类型:",o.name),console.error("错误消息:",o.message),o.response&&(console.error("响应状态:",o.response.status),console.error("响应数据:",o.response.data)),A.value=fe(),G.value=[...A.value]}finally{X.loading=!1}},Pe=o=>{if(console.log("开始更新聚类特征说明",o),o&&o.cluster_stats){const e=o.cluster_stats;console.log("聚类统计数据:",e);const s=Object.entries(e).filter(([i])=>!i.includes("noise")).sort((i,a)=>a[1]-i[1]).slice(0,12);if(console.log("主要聚类:",s),s.length>0){const i=s.map(([m,v],u)=>{const l=parseInt(m.replace("cluster_","")),_=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#ff9f7f","#87ceeb","#32cd32"];let w,x;return v>=30?(w=`大型聚类组，包含${v}家特色相似的餐厅`,x=[`${o.algorithm}算法`,`${v}家餐厅`,"主要聚类","特色明显"]):v>=15?(w=`中型聚类组，包含${v}家风格相近的餐厅`,x=[`${o.algorithm}算法`,`${v}家餐厅`,"中型聚类","风格统一"]):v>=10?(w=`小型聚类组，包含${v}家相似特征的餐厅`,x=[`${o.algorithm}算法`,`${v}家餐厅`,"小型聚类","特征相似"]):(w=`精品聚类组，包含${v}家独特的餐厅`,x=[`${o.algorithm}算法`,`${v}家餐厅`,"精品聚类","独特风格"]),{id:u,originalId:l,name:`聚类 ${u+1}`,color:_[u%_.length],description:w,tags:x,size:v}}),a=s.reduce((m,[,v])=>m+v,0),g=Object.values(e).reduce((m,v)=>m+v,0)-a-(e.noise||0);g>0&&i.push({id:12,originalId:-2,name:"其他聚类",color:"#999999",description:`包含${g}家来自小型聚类的餐厅`,tags:[`${o.algorithm}算法`,`${g}家餐厅`,"小型聚类","混合类型"],size:g}),console.log("生成的聚类特征:",i),I.value=i}}else console.warn("聚类数据缺少cluster_stats属性，无法更新聚类特征")},Te=async o=>{try{const s=(await W.get("/api/analytics/clustering")).data;console.log("获取到聚类数据:",s);let i=null;if(s.success!==!1&&s.data?i=s.data:s.algorithm&&(i=s),!i||!i.labels||i.labels.length===0)return console.error("无法获取有效的聚类数据，使用模拟数据"),fe();Pe(i);const a=i.labels,c=i.pca_data||[];console.log("聚类标签数量:",a.length),console.log("PCA数据数量:",c.length),console.log("餐厅数量:",o.length);const g={};a.forEach(l=>{l!==-1&&(g[l]=(g[l]||0)+1)});const m=Object.entries(g).sort((l,_)=>_[1]-l[1]).slice(0,12).map(([l,_])=>parseInt(l));console.log("前12个最大聚类:",m);const v={};m.forEach((l,_)=>{v[l]=_}),console.log("聚类映射:",v);const u=o.slice(0,a.length).map((l,_)=>{const w=a[_];let x=0,J=0;c&&c.length>_?(x=c[_][0],J=c[_][1]):(x=Math.random()*10-5,J=Math.random()*10-5);let k;w===-1?k=-1:v.hasOwnProperty(w)?k=v[w]:k=12;const b=[],E=l.stars||1;E>=3?b.push("顶级餐厅"):E>=2?b.push("高档餐厅"):b.push("米其林推荐");const S=l.cuisine||"";S&&b.push(`${S}菜系`),l.city&&b.push(`${l.city}位置`);const K=l.price_level||0;K>=4?b.push("高价位"):K>=2?b.push("中等价位"):b.push("经济实惠");let B;return E===3?B=`位于${l.city||l.region||""}的顶级${S}餐厅，提供卓越的用餐体验和无与伦比的服务。`:E===2?B=`这家${S}餐厅位于${l.city||l.region||""}，以其出色的烹饪技艺和独特的用餐环境而闻名。`:B=`这家${S}餐厅提供精致的美食体验，是${l.city||l.region||"当地"}不可错过的美食目的地。`,{id:`r-${_}`,name:l.name,stars:l.stars,cuisine:l.cuisine||"未知菜系",location:l.city||l.region||"未知位置",price:l.price||(l.price_level?"¥".repeat(l.price_level):"¥¥"),pca1:x,pca2:J,cluster:k,originalCluster:w,features:b,description:B}});return console.log("处理后的餐厅数据:",u.length),u}catch(e){return console.error("处理聚类数据错误:",e),fe()}},je=()=>{V==null||V.dispose(),starsChart==null||starsChart.dispose(),P==null||P.dispose(),T==null||T.dispose(),M==null||M.dispose()};at(async()=>{await Ae(),await Be()}),lt(()=>{je(),window.removeEventListener("resize",()=>{})});const fe=()=>{const o=[],e=["法式","日式","意式","现代欧式","地中海式","西班牙式","亚洲融合","美式创新","中式","泰式"],s=["巴黎","东京","纽约","伦敦","香港","洛杉矶","上海","罗马","巴塞罗那","新加坡"],i=["¥¥¥¥¥","¥¥¥¥","¥¥¥","¥¥"],a=[["精致摆盘","名厨主理","创新菜品","顶级食材","无与伦比的服务"],["海景餐厅","本地食材","传统工艺","历史悠久","正宗风味"],["创意融合","时尚氛围","特色调酒","隐秘位置","网红打卡地"],["家族传承","米其林推荐","当地特色","季节菜单","舒适环境"],["文化体验","独特装潢","招牌菜品","性价比高","友好服务"]],c=[{x:3.5,y:-4.2},{x:1.2,y:2.8},{x:5,y:.5},{x:-2.5,y:-1.3},{x:-5,y:-3},{x:-3.2,y:1.5},{x:.8,y:-3.8}],g=[["筑地日光","藤本匠心","花见小路","青山和食","寿司之神","明星料亭","风月怀石","樱花会席"],["巴黎晨光","普罗旺斯","卢浮之味","贵族时光","香榭丽舍","皇家盛宴","蓝带经典","古堡秘境"],["创意工坊","星云实验室","分子厨艺","未来食代","光影味觉","混合理念","质感流动","新食纪元"],["蔚蓝海岸","橄榄树下","圣托里尼","海风咸味","阳光普照","地中海之心","爱琴风情","蓝白相间"],["亚洲风尚","香料之路","辛香花园","味觉东方","云南秘境","泰式风情","越南清香","韩式花园"],["曼哈顿风尚","芝加哥烟火","加州阳光","德州风味","波士顿港湾","纽约风潮","西雅图晨雾","硅谷前沿"],["云南秘境","川味传承","粤式经典","江南水乡","福建风味","东北硬菜","陕西古早","湘味辣魂"]];for(let m=0;m<7;m++){const v=15+m*3,u=g[m];for(let l=0;l<v;l++){const _=l/v*Math.PI*2,w=1.5+Math.cos(l*2.5)*.8,x=c[m].x+Math.cos(_)*w+Math.sin(l*.7)*.5,J=c[m].y+Math.sin(_)*w+Math.cos(l*.7)*.5;let k,b,E;switch(m===0?k=l%5===0?3:2:m===1?k=l%5===0?3:l%3===0?2:1:k=l%7===0?2:1,m){case 0:b="日式";break;case 1:b=l%2===0?"法式":"欧式";break;case 2:b="现代创新";break;case 3:b="地中海式";break;case 4:b=l%3===0?"泰式":l%3===1?"中式":"亚洲融合";break;case 5:b="美式创新";break;case 6:b=l%4===0?"中式":l%4===1?"西班牙式":l%4===2?"意式":"地方特色";break;default:b=e[Math.floor(l%e.length)]}k===3?E=i[0]:k===2?E=i[1]:E=m%2===0?i[2]:i[3];const S=s[Math.floor((m+l)%s.length)],K=a[Math.floor(l%a.length)],B=2+Math.floor(l%3),L=K.slice(0,B),_e=[`这家${b}餐厅提供精致的美食体验，以${L[0]}和${L[1]||"优质服务"}著称。`,`位于${S}的${k}星餐厅，提供令人难忘的${b}美食体验。`,`这家${k}星${b}餐厅以其${L[0]}和独特的用餐体验而闻名。`,`位于${S}的这家餐厅提供正宗${b}，是该地区不可错过的美食体验。`,`这家${E}价位的${b}餐厅以其${L[0]}和独特的用餐环境深受食客喜爱。`],be=_e[Math.floor(l%_e.length)];let R;if(l<u.length)R=u[l];else{const he=["Le ","La ","The ","Il ","El ","",""],oe=[" Bistro"," Restaurant"," Cuisine",""," Kitchen"," Dining"," Grill"];R=he[Math.floor(l%he.length)]+u[l%u.length]+oe[Math.floor(l*3%oe.length)]}o.push({id:`r${m}-${l}`,name:R,stars:k,cuisine:b,location:S,price:E,pca1:x,pca2:J,cluster:m,features:L,description:be})}}return o},ge=()=>{let o=[...A.value];if(te.value){const e=I.value.findIndex(s=>s.name===te.value);e!==-1&&(o=o.filter(s=>s.cluster===e))}if(se.value&&(o=o.filter(e=>e.stars===parseInt(se.value))),ee.value.trim()){const e=ee.value.toLowerCase().trim();o=o.filter(s=>s.name.toLowerCase().includes(e)||s.cuisine.toLowerCase().includes(e)||s.location.toLowerCase().includes(e))}G.value=o,Je()},Ue=()=>{ee.value="",te.value="",se.value="",ge()},Se=o=>{if(o===-1)return"#ccc";const e=I.value.find(s=>s.id===o);return(e==null?void 0:e.color)||"#999"},Ge=o=>{if(o===-1)return"噪声点";const e=I.value.find(s=>s.id===o);return(e==null?void 0:e.name)||"未分类"},Je=o=>{M&&M.getOption()},Ke=o=>{ye.value=o.id},He=()=>{ye.value=null},Fe=o=>{F.value=o,ve.value=!0},Ye=()=>`使用${y.value.algorithm||"DBSCAN"}算法成功识别出${y.value.n_clusters||28}个不同的餐厅聚类`,Y=o=>{const e={clusters:"聚类数量指的是算法自动识别出的不同餐厅群组数目。每个聚类代表一类具有相似特征的餐厅，如高端奢华餐厅、经济实惠餐厅等。数量适中表明分类既有区分度又不过于分散。",silhouette:"轮廓系数是评估聚类质量的重要指标，取值范围为-1到1。数值越接近1表示聚类效果越好，说明同一聚类内的餐厅相似度高，不同聚类间差异明显。通常0.5以上被认为是良好的聚类效果。",composite:"综合评分是结合多个聚类质量指标计算得出的综合评价，包括轮廓系数、聚类内紧密度、聚类间分离度等。该分数越高表明聚类结果的整体质量越好，商业可解释性越强。",noise:"噪声比例是指无法归入任何聚类的异常数据点占总数据的比例。低噪声比例表明数据质量较高，大部分餐厅都能被合理分类。过高的噪声比例可能暗示存在数据质量问题或需要调整算法参数。",features:"总特征数表示用于分析的餐厅属性总数，包括价格、位置、菜系、服务质量等各个维度。丰富的特征有助于更全面地刻画餐厅特点，但过多特征也可能引入噪声，需要通过特征选择找到最佳平衡。",accuracy:"模型准确率反映了基于聚类结果训练的预测模型的性能表现。高准确率说明聚类发现的餐厅分组模式具有较强的预测价值，可以用于餐厅推荐、定价策略等商业应用。"};Ce.value=e[o]||"暂无相关说明",me.value=!0},De=o=>{ue.value=o,ke()},We=()=>{if(!D.value.length)return"正在分析特征重要性数据...";const o=D.value[0];return`最关键的影响因素是"${o.name}"，重要性得分高达${(o.importance*100).toFixed(1)}%，这表明该特征对米其林星级评定具有决定性影响。`},Xe=()=>{if(!D.value.length)return[];const o=[],e=D.value.slice(0,10);e.forEach((i,a)=>{a===0?o.push(`${i.name}是最重要的评判标准，占总体影响力的${(i.importance*100).toFixed(1)}%`):a<3?o.push(`${i.name}作为第${a+1}重要因素，贡献度为${(i.importance*100).toFixed(1)}%`):a<5&&o.push(`${i.name}等次要因素也发挥重要作用，贡献度为${(i.importance*100).toFixed(1)}%`)});const s=e.reduce((i,a)=>i+a.importance,0);return o.push(`前十大特征累计贡献度达${(s*100).toFixed(1)}%，覆盖了主要影响因素`),o},qe=()=>{const o=y.value.algorithm||"DBSCAN";return{DBSCAN:"primary","K-Means":"success",Hierarchical:"warning",OPTICS:"info"}[o]||"primary"},Qe=()=>"42.8",Ze=()=>"28.6",et=()=>[{title:"市场细分",content:"识别出不同档次的餐厅市场",value:`${y.value.n_clusters||28}个细分市场`},{title:"质量评估",content:"聚类结果具有良好的商业意义",value:`${(y.value.silhouette_score||.436).toFixed(3)}质量分`},{title:"数据覆盖",content:"大部分餐厅都能被准确分类",value:`${(100-(y.value.noise_ratio||.15)*100).toFixed(1)}%有效数据`}];return(o,e)=>{const s=N("InfoFilled"),i=it,a=N("Operation"),c=rt,g=N("Menu"),m=ct,v=N("TrendCharts"),u=N("Lightbulb"),l=dt,_=ut,w=pt,x=N("Promotion"),J=N("DataAnalysis"),k=N("Coordinate"),b=N("Mouse"),E=mt,S=bt,K=vt,B=N("StarFilled"),L=$t,_e=xt,be=ft,R=wt,he=Ct,oe=gt,ae=_t;return f(),h(z,null,[t("div",kt,[t("div",St,[e[63]||(e[63]=t("div",{class:"page-header"},[t("h1",{class:"page-title"},"深度分析"),t("p",{class:"page-subtitle"},"聚类分析、趋势预测和深度洞察")],-1)),t("div",Ft,[t("div",{class:"stat-card",onClick:e[0]||(e[0]=r=>Y("clusters"))},[t("div",Dt,p(y.value.n_clusters||28),1),e[17]||(e[17]=t("div",{class:"stat-label"},"聚类数量",-1)),e[18]||(e[18]=t("div",{class:"stat-description"},"基于算法识别出的餐厅群组数量",-1)),t("div",It,[n(i,null,{default:d(()=>[n(s)]),_:1})])]),t("div",{class:"stat-card",onClick:e[1]||(e[1]=r=>Y("silhouette"))},[t("div",Et,p((y.value.silhouette_score||.436).toFixed(3)),1),e[19]||(e[19]=t("div",{class:"stat-label"},"轮廓系数",-1)),e[20]||(e[20]=t("div",{class:"stat-description"},"聚类质量评估指标 (0-1，越高越好)",-1)),t("div",Mt,[n(i,null,{default:d(()=>[n(s)]),_:1})])]),y.value.composite_score?(f(),h("div",{key:0,class:"stat-card",onClick:e[2]||(e[2]=r=>Y("composite"))},[t("div",At,p((y.value.composite_score||0).toFixed(3)),1),e[21]||(e[21]=t("div",{class:"stat-label"},"综合评分",-1)),e[22]||(e[22]=t("div",{class:"stat-description"},"算法优化后的综合质量得分",-1)),t("div",zt,[n(i,null,{default:d(()=>[n(s)]),_:1})])])):H("",!0),y.value.noise_ratio?(f(),h("div",{key:1,class:"stat-card",onClick:e[3]||(e[3]=r=>Y("noise"))},[t("div",Rt,p(((y.value.noise_ratio||0)*100).toFixed(1))+"%",1),e[23]||(e[23]=t("div",{class:"stat-label"},"噪声比例",-1)),e[24]||(e[24]=t("div",{class:"stat-description"},"无法归类的异常数据点比例",-1)),t("div",Nt,[n(i,null,{default:d(()=>[n(s)]),_:1})])])):H("",!0),y.value.composite_score?H("",!0):(f(),h("div",{key:2,class:"stat-card",onClick:e[4]||(e[4]=r=>Y("features"))},[t("div",Ot,p(U.value.total_features||157),1),e[25]||(e[25]=t("div",{class:"stat-label"},"总特征数",-1)),e[26]||(e[26]=t("div",{class:"stat-description"},"用于分析的餐厅属性特征总数",-1)),t("div",Vt,[n(i,null,{default:d(()=>[n(s)]),_:1})])])),y.value.noise_ratio?H("",!0):(f(),h("div",{key:3,class:"stat-card",onClick:e[5]||(e[5]=r=>Y("accuracy"))},[t("div",Bt,p((U.value.model_accuracy||.87).toFixed(1))+"%",1),e[27]||(e[27]=t("div",{class:"stat-label"},"模型准确率",-1)),e[28]||(e[28]=t("div",{class:"stat-description"},"预测模型的准确度表现",-1)),t("div",Lt,[n(i,null,{default:d(()=>[n(s)]),_:1})])]))]),t("div",Pt,[t("div",Tt,[e[32]||(e[32]=t("h3",{class:"card-title"},"特征重要性分析",-1)),e[33]||(e[33]=t("p",{class:"card-subtitle"},"影响米其林星级评定的关键因素",-1)),t("div",jt,[n(m,{size:"small"},{default:d(()=>[n(c,{onClick:e[6]||(e[6]=r=>De("horizontal")),type:ue.value==="horizontal"?"primary":""},{default:d(()=>[n(i,null,{default:d(()=>[n(a)]),_:1}),e[29]||(e[29]=$(" 水平 "))]),_:1,__:[29]},8,["type"]),n(c,{onClick:e[7]||(e[7]=r=>De("vertical")),type:ue.value==="vertical"?"primary":""},{default:d(()=>[n(i,null,{default:d(()=>[n(g)]),_:1}),e[30]||(e[30]=$(" 垂直 "))]),_:1,__:[30]},8,["type"])]),_:1}),n(c,{size:"small",onClick:e[8]||(e[8]=r=>pe.value=!pe.value),type:pe.value?"warning":""},{default:d(()=>[n(i,null,{default:d(()=>[n(v)]),_:1}),e[31]||(e[31]=$(" 对比视图 "))]),_:1,__:[31]},8,["type"])])]),t("div",Ut,[ie((f(),h("div",Gt,e[34]||(e[34]=[t("div",{id:"feature-importance-chart",style:{height:"400px"}},null,-1)]))),[[ae,q.value]]),pe.value?(f(),h("div",Jt,[e[35]||(e[35]=t("h4",null,"特征对比分析",-1)),t("div",Kt,[(f(!0),h(z,null,O(Me.value.slice(0,10),(r,j)=>(f(),h("div",{class:"comparison-item",key:j},[t("div",Ht,[t("div",Yt,p(r.name),1),t("div",Wt,p((r.importance*100).toFixed(1))+"%",1),t("div",Xt,[t("div",{class:"bar-fill",style:re({width:r.importance*100+"%"})},null,4)]),t("div",qt,p(r.description),1)])]))),128))])])):H("",!0),t("div",Qt,[t("h4",null,[n(i,null,{default:d(()=>[n(u)]),_:1}),e[36]||(e[36]=$(" 数据洞察"))]),t("div",Zt,[n(l,{title:We(),type:"info",closable:!1,"show-icon":""},null,8,["title"]),t("div",es,[e[37]||(e[37]=t("p",null,[t("strong",null,"关键发现：")],-1)),t("ul",null,[(f(!0),h(z,null,O(Xe(),r=>(f(),h("li",{key:r},p(r),1))),128))])])])])])]),t("div",ts,[t("div",ss,[e[39]||(e[39]=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"价格分布分析"),t("p",{class:"card-subtitle"},"不同价格等级餐厅的分布情况")],-1)),t("div",os,[ie((f(),h("div",as,e[38]||(e[38]=[t("div",{id:"price-distribution-chart",style:{height:"300px"}},null,-1)]))),[[ae,q.value]])])]),t("div",ls,[e[41]||(e[41]=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"地区分布"),t("p",{class:"card-subtitle"},"全球米其林餐厅地理分布")],-1)),t("div",ns,[ie((f(),h("div",is,e[40]||(e[40]=[t("div",{id:"region-distribution-chart",style:{height:"300px"}},null,-1)]))),[[ae,q.value]])])])]),t("div",rs,[e[43]||(e[43]=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"菜系分析"),t("p",{class:"card-subtitle"},"不同菜系的星级分布情况")],-1)),t("div",cs,[ie((f(),h("div",ds,e[42]||(e[42]=[t("div",{id:"cuisine-analysis-chart",style:{height:"400px"}},null,-1)]))),[[ae,q.value]])])]),t("div",us,[e[61]||(e[61]=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"聚类分析结果"),t("p",{class:"card-subtitle"},"基于多维特征的餐厅聚类可视化")],-1)),t("div",ps,[t("div",ms,[n(l,{title:Ye(),type:"success",closable:!1,"show-icon":""},null,8,["title"]),t("div",vs,[t("div",fs,[n(_,{size:"large",type:qe(),effect:"dark"},{default:d(()=>[$(p(y.value.algorithm||"DBSCAN")+" 聚类算法 ",1)]),_:1},8,["type"]),t("span",gs,[e[44]||(e[44]=$(" 聚类质量： ")),n(w,{modelValue:we.value,"onUpdate:modelValue":e[9]||(e[9]=r=>we.value=r),disabled:"","show-score":"","text-color":"#ff9900",max:5,size:"small"},null,8,["modelValue"])])]),t("div",_s,[y.value.optimization_type==="advanced"?(f(),h("p",hs,[n(i,null,{default:d(()=>[n(x)]),_:1}),e[45]||(e[45]=t("strong",null,"高级优化聚类分析：",-1)),$("采用多层特征工程和自适应参数优化技术， 成功将噪声点比例从传统算法的27%优化至"+p(((y.value.noise_ratio||0)*100).toFixed(1))+"%， 综合聚类质量得分达到"+p((y.value.composite_score||0).toFixed(3))+"，显著提升了聚类的商业可解释性。 ",1)])):(f(),h("p",ys,[n(i,null,{default:d(()=>[n(J)]),_:1}),e[46]||(e[46]=t("strong",null,"标准聚类分析：",-1)),$("基于"+p(y.value.algorithm||"DBSCAN")+"算法和主成分分析(PCA)降维技术， 将复杂的多维餐厅特征投影到二维平面。相同颜色的点代表具有相似特征的餐厅群组， 轮廓系数"+p((y.value.silhouette_score||.436).toFixed(3))+"表明聚类结果具有良好的分离度。 ",1)]))]),t("div",bs,[t("h5",null,[n(i,null,{default:d(()=>[n(k)]),_:1}),e[47]||(e[47]=$(" 坐标轴详细解释"))]),t("div",$s,[t("div",xs,[t("strong",null,"X轴 - 主成分1 ("+p(Qe())+"% 方差贡献)：",1),e[48]||(e[48]=t("span",null,"综合反映餐厅的档次定位，包括价格水平、装修档次、服务质量等高端化指标",-1)),e[49]||(e[49]=t("div",{class:"axis-scale"},[t("span",{class:"scale-left"},"经济实惠"),t("div",{class:"scale-bar"}),t("span",{class:"scale-right"},"奢华高端")],-1))]),t("div",ws,[t("strong",null,"Y轴 - 主成分2 ("+p(Ze())+"% 方差贡献)：",1),e[50]||(e[50]=t("span",null,"主要体现餐厅的风格特色，包括菜系类型、创新程度、文化背景等差异化因素",-1)),e[51]||(e[51]=t("div",{class:"axis-scale vertical"},[t("span",{class:"scale-top"},"传统经典"),t("div",{class:"scale-bar"}),t("span",{class:"scale-bottom"},"创新融合")],-1))])])]),t("div",Cs,[t("h5",null,[n(i,null,{default:d(()=>[n(v)]),_:1}),e[52]||(e[52]=$(" 商业洞察"))]),t("div",ks,[(f(!0),h(z,null,O(et(),r=>(f(),h("div",{class:"insight-card",key:r.title},[t("div",Ss,p(r.title),1),t("div",Fs,p(r.content),1),t("div",Ds,p(r.value),1)]))),128))])]),t("p",Is,[n(i,null,{default:d(()=>[n(b)]),_:1}),e[53]||(e[53]=t("strong",null,"交互提示：",-1)),e[54]||(e[54]=$("点击散点图中的任意餐厅查看详细信息，使用下方筛选器进行精确检索， 悬停在聚类图例上可高亮对应餐厅群组。 "))])])]),t("div",Es,[ie((f(),h("div",Ms,[t("div",As,[t("div",zs,[n(E,{modelValue:ee.value,"onUpdate:modelValue":e[10]||(e[10]=r=>ee.value=r),placeholder:"搜索餐厅...","prefix-icon":"Search",clearable:"",onInput:ge,size:"small",style:{width:"200px"}},null,8,["modelValue"]),n(K,{modelValue:te.value,"onUpdate:modelValue":e[11]||(e[11]=r=>te.value=r),placeholder:"选择聚类",size:"small",onChange:ge,clearable:"",style:{width:"140px"}},{default:d(()=>[(f(!0),h(z,null,O(I.value,r=>(f(),ce(S,{key:r.name,label:r.name,value:r.name},{default:d(()=>[t("div",Rs,[t("div",{style:re({width:"12px",height:"12px",borderRadius:"50%",backgroundColor:r.color,marginRight:"8px"})},null,4),t("span",null,p(r.name),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),n(K,{modelValue:se.value,"onUpdate:modelValue":e[12]||(e[12]=r=>se.value=r),placeholder:"星级",size:"small",onChange:ge,clearable:"",style:{width:"100px"}},{default:d(()=>[n(S,{label:"一星",value:"1"}),n(S,{label:"二星",value:"2"}),n(S,{label:"三星",value:"3"})]),_:1},8,["modelValue"])]),n(c,{type:"primary",size:"small",onClick:Ue,plain:""},{default:d(()=>e[55]||(e[55]=[$("重置筛选")])),_:1,__:[55]})]),e[56]||(e[56]=t("div",{id:"cluster-scatter-chart",style:{height:"500px"}},null,-1))])),[[ae,q.value]]),t("div",Ns,[e[59]||(e[59]=t("h4",null,"聚类特征说明",-1)),t("div",Os,[(f(!0),h(z,null,O(I.value,(r,j)=>(f(),h("div",{key:j,class:"cluster-feature-item"},[t("div",{class:"cluster-color",style:re({backgroundColor:r.color})},null,4),t("div",Vs,[t("strong",null,p(r.name),1),t("p",null,p(r.description),1),t("div",Bs,[(f(!0),h(z,null,O(r.tags,(le,Ie)=>(f(),ce(_,{key:Ie,size:"small",type:de[Ie%de.length],effect:"light",style:{"margin-right":"5px","margin-bottom":"5px"}},{default:d(()=>[$(p(le),1)]),_:2},1032,["type"]))),128))])])]))),128))]),e[60]||(e[60]=t("h4",{style:{"margin-top":"20px"}},"餐厅列表",-1)),t("div",Ls,[t("div",Ps,[e[57]||(e[57]=$(" 共找到 ")),t("span",Ts,p(G.value.length),1),e[58]||(e[58]=$(" 家餐厅 "))]),t("div",js,[(f(!0),h(z,null,O(G.value,(r,j)=>(f(),h("div",{key:j,class:ht(["restaurant-list-item",{highlighted:ye.value===r.id}]),onClick:le=>Fe(r),onMouseover:le=>Ke(r),onMouseleave:He},[t("div",{class:"restaurant-dot",style:re({backgroundColor:Se(r.cluster)})},null,4),t("div",Gs,[t("div",Js,p(r.name),1),t("div",Ks,[t("span",null,p(r.location),1),t("span",Hs,[(f(!0),h(z,null,O(r.stars,le=>(f(),ce(i,{key:le},{default:d(()=>[n(B)]),_:2},1024))),128))])])])],42,Us))),128)),G.value.length===0?(f(),h("div",Ys," 没有符合条件的餐厅 ")):H("",!0)])])])])])]),t("div",Ws,[e[62]||(e[62]=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"特征详细信息")],-1)),t("div",Xs,[n(be,{data:D.value,stripe:"",style:{width:"100%"}},{default:d(()=>[n(L,{prop:"name",label:"特征名称","min-width":"150"}),n(L,{prop:"importance",label:"重要性",width:"120"},{default:d(r=>[t("div",null,[n(_e,{percentage:r.row.importance*100,"stroke-width":8,"show-text":!1},null,8,["percentage"]),t("span",qs,p((r.row.importance*100).toFixed(1))+"%",1)])]),_:1}),n(L,{prop:"description",label:"描述","min-width":"200"})]),_:1},8,["data"])])])])]),n(oe,{modelValue:ve.value,"onUpdate:modelValue":e[14]||(e[14]=r=>ve.value=r),title:"餐厅详情",width:"600px","destroy-on-close":"","show-close":!0},{default:d(()=>[F.value?(f(),h("div",Qs,[t("div",Zs,[t("h3",null,p(F.value.name),1),t("div",eo,[(f(!0),h(z,null,O(F.value.stars,r=>(f(),ce(i,{key:r,color:"#f5a623"},{default:d(()=>[n(B)]),_:2},1024))),128))])]),n(he,{column:2,border:""},{default:d(()=>[n(R,{label:"所属聚类"},{default:d(()=>[n(_,{style:re({backgroundColor:Se(F.value.cluster),color:"#fff",fontWeight:"bold"})},{default:d(()=>[$(p(Ge(F.value.cluster)),1)]),_:1},8,["style"])]),_:1}),n(R,{label:"地理位置"},{default:d(()=>[$(p(F.value.location),1)]),_:1}),n(R,{label:"菜系"},{default:d(()=>[$(p(F.value.cuisine),1)]),_:1}),n(R,{label:"价格"},{default:d(()=>[$(p(F.value.price),1)]),_:1}),n(R,{label:"主成分1"},{default:d(()=>[$(p(F.value.pca1.toFixed(2)),1)]),_:1}),n(R,{label:"主成分2"},{default:d(()=>[$(p(F.value.pca2.toFixed(2)),1)]),_:1})]),_:1}),t("div",to,[e[64]||(e[64]=t("h4",null,"特色标签",-1)),t("div",so,[(f(!0),h(z,null,O(F.value.features,(r,j)=>(f(),ce(_,{key:j,size:"medium",type:de[j%de.length],effect:"light"},{default:d(()=>[$(p(r),1)]),_:2},1032,["type"]))),128))])]),t("div",oo,[e[65]||(e[65]=t("h4",null,"餐厅描述",-1)),t("p",null,p(F.value.description),1)]),t("div",ao,[n(c,{onClick:e[13]||(e[13]=r=>ve.value=!1)},{default:d(()=>e[66]||(e[66]=[$("关闭")])),_:1,__:[66]})])])):H("",!0)]),_:1},8,["modelValue"]),n(oe,{modelValue:me.value,"onUpdate:modelValue":e[16]||(e[16]=r=>me.value=r),title:"指标说明",width:"500px","destroy-on-close":""},{footer:d(()=>[n(c,{onClick:e[15]||(e[15]=r=>me.value=!1)},{default:d(()=>e[67]||(e[67]=[$("关闭")])),_:1,__:[67]})]),default:d(()=>[t("div",lo,[t("p",null,p(Ce.value),1)])]),_:1},8,["modelValue"])],64)}}},_o=ot(no,[["__scopeId","data-v-af2f6ec2"]]);export{_o as default};
