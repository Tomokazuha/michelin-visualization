2025-05-26 11:15:34,299 - utils - INFO - [检查] 检查运行环境...
2025-05-26 11:15:39,376 - utils - ERROR - [错误] 缺少必要的包: scikit-learn
2025-05-26 11:15:39,376 - utils - ERROR - 请运行: pip install -r requirements.txt
2025-05-26 11:16:10,728 - utils - INFO - [检查] 检查运行环境...
2025-05-26 11:16:15,817 - utils - INFO - [成功] 环境检查通过
2025-05-26 11:16:20,667 - utils - INFO - ============================================================
2025-05-26 11:16:20,667 - utils - INFO - 开始执行米其林餐厅数据处理流水线
2025-05-26 11:16:20,668 - utils - INFO - 开始时间: 2025-05-26 11:16:20
2025-05-26 11:16:20,677 - utils - INFO - ============================================================
2025-05-26 11:16:20,677 - utils - INFO - 
[步骤1] 数据清洗
2025-05-26 11:16:20,677 - utils - INFO - ----------------------------------------
2025-05-26 11:16:20,685 - utils - INFO - 开始数据清洗主流程...
2025-05-26 11:16:20,703 - utils - INFO - Loaded 549 records from one-star-michelin-restaurants.csv
2025-05-26 11:16:20,706 - utils - INFO - Loaded 110 records from two-stars-michelin-restaurants.csv
2025-05-26 11:16:20,710 - utils - INFO - Loaded 36 records from three-stars-michelin-restaurants.csv
2025-05-26 11:16:20,713 - utils - INFO - Combined dataset: 695 total records
2025-05-26 11:16:20,714 - utils - INFO - 加载原始数据: 695 条记录, 11 个字段
2025-05-26 11:16:20,722 - utils - INFO - 数据质量验证完成: 695 条记录
2025-05-26 11:16:20,722 - utils - INFO - 开始完整数据清洗流程...
2025-05-26 11:16:20,723 - utils - INFO - 开始处理缺失值...
2025-05-26 11:16:20,726 - utils - INFO - Data cleaning: Fill city with Unknown - {'filled_values': 2}
2025-05-26 11:16:20,727 - utils - INFO - Data cleaning: Fill zipCode with Unknown - {'filled_values': 194}
2025-05-26 11:16:20,729 - utils - INFO - Data cleaning: Missing values summary - {'before': {'name': 0, 'year': 0, 'latitude': 0, 'longitude': 0, 'city': 2, 'region': 0, 'zipCode': 194, 'cuisine': 0, 'price': 176, 'url': 0, 'stars': 0}, 'after': {'name': 0, 'year': 0, 'latitude': 0, 'longitude': 0, 'city': 0, 'region': 0, 'zipCode': 0, 'cuisine': 0, 'price': 176, 'url': 0, 'stars': 0}}
2025-05-26 11:16:20,730 - utils - INFO - 开始处理异常值...
2025-05-26 11:16:20,733 - utils - INFO - Data cleaning: Handle outliers in latitude - {'outliers_count': 18, 'lower_bound': -14.661648749999998, 'upper_bound': 90}
2025-05-26 11:16:20,739 - utils - INFO - Data cleaning: Handle outliers in year - {'outliers_count': 39, 'lower_bound': 2019.0, 'upper_bound': 2019.0}
2025-05-26 11:16:20,740 - utils - INFO - 开始标准化文本字段...
2025-05-26 11:16:20,742 - utils - INFO - Data cleaning: Standardize name - {'unique_before': 684, 'unique_after': 684}
2025-05-26 11:16:20,744 - utils - INFO - Data cleaning: Standardize city - {'unique_before': 180, 'unique_after': 180}
2025-05-26 11:16:20,745 - utils - INFO - Data cleaning: Standardize region - {'unique_before': 24, 'unique_after': 24}
2025-05-26 11:16:20,748 - utils - INFO - Data cleaning: Standardize cuisine - {'unique_before': 70, 'unique_after': 62}
2025-05-26 11:16:20,748 - utils - INFO - 开始标准化价格字段...
2025-05-26 11:16:20,751 - utils - INFO - Data cleaning: Standardize price - {'unique_before': 5, 'unique_after': 6, 'price_distribution': {'Very Expensive': 197, 'Unknown': 176, 'Expensive': 143, 'Moderate': 75, 'Luxury': 73, 'Budget': 31}}
2025-05-26 11:16:20,751 - utils - INFO - 开始添加派生特征...
2025-05-26 11:16:20,764 - utils - INFO - Data cleaning: Add derived features - {'new_features': ['years_since_award', 'decade', 'hemisphere', 'continent', 'has_url', 'name_length', 'name_word_count']}
2025-05-26 11:16:20,764 - utils - INFO - 开始去除重复记录...
2025-05-26 11:16:20,766 - utils - INFO - Data cleaning: Remove duplicates - {'original_count': 695, 'final_count': 695, 'removed_count': 0}
2025-05-26 11:16:20,767 - utils - INFO - Data cleaning: Data cleaning completed - {'original_shape': (695, 11), 'cleaned_shape': (695, 20), 'records_removed': 0, 'features_added': 9}
2025-05-26 11:16:20,778 - utils - INFO - Data exported to E:\作业\数据可视化\michelin-project\data\cleaned\restaurants_cleaned.csv
2025-05-26 11:16:20,783 - utils - INFO - Data exported to E:\作业\数据可视化\michelin-project\data\cleaned\restaurants_cleaned.json
2025-05-26 11:16:20,785 - utils - ERROR - 数据清洗过程中发生错误: Object of type int64 is not JSON serializable
2025-05-26 11:16:20,785 - utils - ERROR - 
[错误] 流水线执行失败: Object of type int64 is not JSON serializable
2025-05-26 11:16:20,786 - utils - ERROR - 请检查错误信息并重新运行
2025-05-26 11:17:26,580 - utils - INFO - [检查] 检查运行环境...
2025-05-26 11:17:31,581 - utils - INFO - [成功] 环境检查通过
2025-05-26 11:17:37,270 - utils - INFO - ============================================================
2025-05-26 11:17:37,271 - utils - INFO - 开始执行米其林餐厅数据处理流水线
2025-05-26 11:17:37,271 - utils - INFO - 开始时间: 2025-05-26 11:17:37
2025-05-26 11:17:37,271 - utils - INFO - ============================================================
2025-05-26 11:17:37,271 - utils - INFO - 
[步骤1] 数据清洗
2025-05-26 11:17:37,271 - utils - INFO - ----------------------------------------
2025-05-26 11:17:37,277 - utils - INFO - 开始数据清洗主流程...
2025-05-26 11:17:37,282 - utils - INFO - Loaded 549 records from one-star-michelin-restaurants.csv
2025-05-26 11:17:37,284 - utils - INFO - Loaded 110 records from two-stars-michelin-restaurants.csv
2025-05-26 11:17:37,286 - utils - INFO - Loaded 36 records from three-stars-michelin-restaurants.csv
2025-05-26 11:17:37,288 - utils - INFO - Combined dataset: 695 total records
2025-05-26 11:17:37,289 - utils - INFO - 加载原始数据: 695 条记录, 11 个字段
2025-05-26 11:17:37,293 - utils - INFO - 数据质量验证完成: 695 条记录
2025-05-26 11:17:37,293 - utils - INFO - 开始完整数据清洗流程...
2025-05-26 11:17:37,294 - utils - INFO - 开始处理缺失值...
2025-05-26 11:17:37,296 - utils - INFO - Data cleaning: Fill city with Unknown - {'filled_values': 2}
2025-05-26 11:17:37,298 - utils - INFO - Data cleaning: Fill zipCode with Unknown - {'filled_values': 194}
2025-05-26 11:17:37,300 - utils - INFO - Data cleaning: Missing values summary - {'before': {'name': 0, 'year': 0, 'latitude': 0, 'longitude': 0, 'city': 2, 'region': 0, 'zipCode': 194, 'cuisine': 0, 'price': 176, 'url': 0, 'stars': 0}, 'after': {'name': 0, 'year': 0, 'latitude': 0, 'longitude': 0, 'city': 0, 'region': 0, 'zipCode': 0, 'cuisine': 0, 'price': 176, 'url': 0, 'stars': 0}}
2025-05-26 11:17:37,300 - utils - INFO - 开始处理异常值...
2025-05-26 11:17:37,303 - utils - INFO - Data cleaning: Handle outliers in latitude - {'outliers_count': 18, 'lower_bound': -14.661648749999998, 'upper_bound': 90}
2025-05-26 11:17:37,308 - utils - INFO - Data cleaning: Handle outliers in year - {'outliers_count': 39, 'lower_bound': 2019.0, 'upper_bound': 2019.0}
2025-05-26 11:17:37,308 - utils - INFO - 开始标准化文本字段...
2025-05-26 11:17:37,309 - utils - INFO - Data cleaning: Standardize name - {'unique_before': 684, 'unique_after': 684}
2025-05-26 11:17:37,311 - utils - INFO - Data cleaning: Standardize city - {'unique_before': 180, 'unique_after': 180}
2025-05-26 11:17:37,311 - utils - INFO - Data cleaning: Standardize region - {'unique_before': 24, 'unique_after': 24}
2025-05-26 11:17:37,313 - utils - INFO - Data cleaning: Standardize cuisine - {'unique_before': 70, 'unique_after': 62}
2025-05-26 11:17:37,315 - utils - INFO - 开始标准化价格字段...
2025-05-26 11:17:37,317 - utils - INFO - Data cleaning: Standardize price - {'unique_before': 5, 'unique_after': 6, 'price_distribution': {'Very Expensive': 197, 'Unknown': 176, 'Expensive': 143, 'Moderate': 75, 'Luxury': 73, 'Budget': 31}}
2025-05-26 11:17:37,317 - utils - INFO - 开始添加派生特征...
2025-05-26 11:17:37,326 - utils - INFO - Data cleaning: Add derived features - {'new_features': ['years_since_award', 'decade', 'hemisphere', 'continent', 'has_url', 'name_length', 'name_word_count']}
2025-05-26 11:17:37,326 - utils - INFO - 开始去除重复记录...
2025-05-26 11:17:37,328 - utils - INFO - Data cleaning: Remove duplicates - {'original_count': 695, 'final_count': 695, 'removed_count': 0}
2025-05-26 11:17:37,328 - utils - INFO - Data cleaning: Data cleaning completed - {'original_shape': (695, 11), 'cleaned_shape': (695, 20), 'records_removed': 0, 'features_added': 9}
2025-05-26 11:17:37,339 - utils - INFO - Data exported to E:\作业\数据可视化\michelin-project\data\cleaned\restaurants_cleaned.csv
2025-05-26 11:17:37,345 - utils - INFO - Data exported to E:\作业\数据可视化\michelin-project\data\cleaned\restaurants_cleaned.json
2025-05-26 11:17:37,347 - utils - ERROR - 数据清洗过程中发生错误: Object of type int64 is not JSON serializable
2025-05-26 11:17:37,347 - utils - ERROR - 
[错误] 流水线执行失败: Object of type int64 is not JSON serializable
2025-05-26 11:17:37,348 - utils - ERROR - 请检查错误信息并重新运行
2025-05-26 11:18:11,604 - utils - INFO - [检查] 检查运行环境...
2025-05-26 11:18:16,923 - utils - INFO - [成功] 环境检查通过
2025-05-26 11:18:19,427 - utils - INFO - ============================================================
2025-05-26 11:18:19,427 - utils - INFO - 开始执行米其林餐厅数据处理流水线
2025-05-26 11:18:19,427 - utils - INFO - 开始时间: 2025-05-26 11:18:19
2025-05-26 11:18:19,427 - utils - INFO - ============================================================
2025-05-26 11:18:19,427 - utils - INFO - 
[步骤1] 数据清洗
2025-05-26 11:18:19,427 - utils - INFO - ----------------------------------------
2025-05-26 11:18:19,435 - utils - INFO - 开始数据清洗主流程...
2025-05-26 11:18:19,441 - utils - INFO - Loaded 549 records from one-star-michelin-restaurants.csv
2025-05-26 11:18:19,444 - utils - INFO - Loaded 110 records from two-stars-michelin-restaurants.csv
2025-05-26 11:18:19,446 - utils - INFO - Loaded 36 records from three-stars-michelin-restaurants.csv
2025-05-26 11:18:19,448 - utils - INFO - Combined dataset: 695 total records
2025-05-26 11:18:19,448 - utils - INFO - 加载原始数据: 695 条记录, 11 个字段
2025-05-26 11:18:19,452 - utils - INFO - 数据质量验证完成: 695 条记录
2025-05-26 11:18:19,452 - utils - INFO - 开始完整数据清洗流程...
2025-05-26 11:18:19,453 - utils - INFO - 开始处理缺失值...
2025-05-26 11:18:19,455 - utils - INFO - Data cleaning: Fill city with Unknown - {'filled_values': 2}
2025-05-26 11:18:19,457 - utils - INFO - Data cleaning: Fill zipCode with Unknown - {'filled_values': 194}
2025-05-26 11:18:19,459 - utils - INFO - Data cleaning: Missing values summary - {'before': {'name': 0, 'year': 0, 'latitude': 0, 'longitude': 0, 'city': 2, 'region': 0, 'zipCode': 194, 'cuisine': 0, 'price': 176, 'url': 0, 'stars': 0}, 'after': {'name': 0, 'year': 0, 'latitude': 0, 'longitude': 0, 'city': 0, 'region': 0, 'zipCode': 0, 'cuisine': 0, 'price': 176, 'url': 0, 'stars': 0}}
2025-05-26 11:18:19,460 - utils - INFO - 开始处理异常值...
2025-05-26 11:18:19,462 - utils - INFO - Data cleaning: Handle outliers in latitude - {'outliers_count': 18, 'lower_bound': -14.661648749999998, 'upper_bound': 90}
2025-05-26 11:18:19,468 - utils - INFO - Data cleaning: Handle outliers in year - {'outliers_count': 39, 'lower_bound': 2019.0, 'upper_bound': 2019.0}
2025-05-26 11:18:19,468 - utils - INFO - 开始标准化文本字段...
2025-05-26 11:18:19,469 - utils - INFO - Data cleaning: Standardize name - {'unique_before': 684, 'unique_after': 684}
2025-05-26 11:18:19,471 - utils - INFO - Data cleaning: Standardize city - {'unique_before': 180, 'unique_after': 180}
2025-05-26 11:18:19,472 - utils - INFO - Data cleaning: Standardize region - {'unique_before': 24, 'unique_after': 24}
2025-05-26 11:18:19,474 - utils - INFO - Data cleaning: Standardize cuisine - {'unique_before': 70, 'unique_after': 62}
2025-05-26 11:18:19,475 - utils - INFO - 开始标准化价格字段...
2025-05-26 11:18:19,477 - utils - INFO - Data cleaning: Standardize price - {'unique_before': 5, 'unique_after': 6, 'price_distribution': {'Very Expensive': 197, 'Unknown': 176, 'Expensive': 143, 'Moderate': 75, 'Luxury': 73, 'Budget': 31}}
2025-05-26 11:18:19,478 - utils - INFO - 开始添加派生特征...
2025-05-26 11:18:19,487 - utils - INFO - Data cleaning: Add derived features - {'new_features': ['years_since_award', 'decade', 'hemisphere', 'continent', 'has_url', 'name_length', 'name_word_count']}
2025-05-26 11:18:19,488 - utils - INFO - 开始去除重复记录...
2025-05-26 11:18:19,489 - utils - INFO - Data cleaning: Remove duplicates - {'original_count': 695, 'final_count': 695, 'removed_count': 0}
2025-05-26 11:18:19,489 - utils - INFO - Data cleaning: Data cleaning completed - {'original_shape': (695, 11), 'cleaned_shape': (695, 20), 'records_removed': 0, 'features_added': 9}
2025-05-26 11:18:19,500 - utils - INFO - Data exported to E:\作业\数据可视化\michelin-project\data\cleaned\restaurants_cleaned.csv
2025-05-26 11:18:19,507 - utils - INFO - Data exported to E:\作业\数据可视化\michelin-project\data\cleaned\restaurants_cleaned.json
2025-05-26 11:18:19,509 - utils - INFO - 清洗报告已保存: E:\作业\数据可视化\michelin-project\data\cleaned\cleaning_report.json
2025-05-26 11:18:19,520 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\cleaned_data.pkl
2025-05-26 11:18:19,521 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\cleaning_report.pkl
2025-05-26 11:18:19,521 - utils - INFO - 数据清洗流程完成!
2025-05-26 11:18:19,521 - utils - INFO - 原始数据: (695, 11)
2025-05-26 11:18:19,521 - utils - INFO - 清洗后数据: (695, 20)
2025-05-26 11:18:19,522 - utils - INFO - [完成] 数据清洗完成，耗时: 0.09秒
2025-05-26 11:18:19,522 - utils - INFO - 
[步骤2] 地理编码
2025-05-26 11:18:19,522 - utils - INFO - ----------------------------------------
2025-05-26 11:18:19,730 - utils - INFO - 开始地理编码主流程...
2025-05-26 11:18:19,737 - utils - INFO - 加载清洗后数据: 695 条记录
2025-05-26 11:18:20,275 - utils - INFO - 开始批量地理编码...
2025-05-26 11:18:20,312 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\geocoding_cache.pkl
2025-05-26 11:18:20,312 - utils - INFO - 已保存地理编码缓存: 0 条记录
2025-05-26 11:18:20,313 - utils - INFO - 地理编码完成:
2025-05-26 11:18:20,313 - utils - INFO -   - 总记录数: 695
2025-05-26 11:18:20,313 - utils - INFO -   - 成功编码: 0
2025-05-26 11:18:20,313 - utils - INFO -   - 编码失败: 0
2025-05-26 11:18:20,314 - utils - INFO -   - 失败率: 0.00%
2025-05-26 11:18:20,314 - utils - INFO - 开始创建增强地理特征...
2025-05-26 11:18:20,340 - utils - INFO - 增强地理特征创建完成
2025-05-26 11:18:20,340 - utils - INFO - 开始地理分布分析...
2025-05-26 11:18:20,348 - utils - INFO - 地理分布分析完成
2025-05-26 11:18:20,349 - utils - INFO - 开始创建GeoJSON...
2025-05-26 11:18:20,427 - utils - INFO - GeoJSON创建完成: 695 个特征
2025-05-26 11:18:20,437 - utils - INFO - Data exported to E:\作业\数据可视化\michelin-project\data\cleaned\restaurants_geocoded.csv
2025-05-26 11:18:20,475 - utils - INFO - GeoJSON已保存: E:\作业\数据可视化\michelin-project\data\cleaned\restaurants_geo.json
2025-05-26 11:18:20,476 - utils - INFO - 地理分析报告已保存: E:\作业\数据可视化\michelin-project\data\cleaned\geographic_analysis.json
2025-05-26 11:18:20,478 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\geocoded_data.pkl
2025-05-26 11:18:20,481 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\geojson_data.pkl
2025-05-26 11:18:20,482 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\geographic_analysis.pkl
2025-05-26 11:18:20,483 - utils - INFO - 地理编码流程完成!
2025-05-26 11:18:20,483 - utils - INFO - 成功处理 695 条记录
2025-05-26 11:18:20,486 - utils - INFO - [完成] 地理编码完成，耗时: 0.96秒
2025-05-26 11:18:20,486 - utils - INFO - 
[步骤3] 特征工程
2025-05-26 11:18:20,487 - utils - INFO - ----------------------------------------
2025-05-26 11:18:20,557 - utils - INFO - 开始特征工程主流程...
2025-05-26 11:18:20,564 - utils - INFO - 加载地理编码数据: 695 条记录, 24 个特征
2025-05-26 11:18:20,564 - utils - INFO - 开始完整特征工程流程...
2025-05-26 11:18:20,564 - utils - INFO - 创建价格相关特征...
2025-05-26 11:18:20,569 - utils - INFO - Feature engineering: Create price features - {'new_features': ['price_category', 'price_star_ratio', 'value_score', 'price_percentile'], 'price_distribution': {'Budget': 207, 'Very Expensive': 197, 'Expensive': 143, 'Moderate': 75, 'Luxury': 73}}
2025-05-26 11:18:20,570 - utils - INFO - 创建地理相关特征...
2025-05-26 11:18:20,580 - utils - INFO - Feature engineering: Create geographic features - {'new_features': ['latitude_band', 'longitude_band', 'density_level'], 'latitude_distribution': {'North Subtropical': 496, 'Equatorial': 171, 'South Subtropical': 18, 'North Temperate': 10, 'Antarctic': 0, 'South Temperate': 0}, 'longitude_distribution': {'West Central': 188, 'East': 147, 'West': 139, 'East Central': 108, 'Far West': 63, 'Far East': 50}}
2025-05-26 11:18:20,580 - utils - INFO - 创建时间相关特征...
2025-05-26 11:18:20,587 - utils - INFO - Feature engineering: Create temporal features - {'new_features': ['era', 'freshness_score', 'year_avg_stars', 'above_year_avg'], 'era_distribution': {'Recent': 695, 'Historic': 0, 'Early Modern': 0, 'Current': 0}, 'year_range': '2019-2019'}
2025-05-26 11:18:20,587 - utils - INFO - 创建菜系相关特征...
2025-05-26 11:18:20,589 - utils - INFO - Feature engineering: Create cuisine features - {'new_features': ['cuisine_popularity', 'cuisine_type', 'cuisine_avg_stars', 'above_cuisine_avg', 'rare_cuisine'], 'cuisine_type_distribution': {'Modern': 261, 'Asian': 164, 'Other': 142, 'European': 128}, 'popular_cuisines': {'Modern': 183, 'Japanese': 54, 'French': 51, 'Creative': 46, 'British': 44, 'Cantonese': 42, 'Innovative': 28, 'Italian': 21, 'Sushi': 17, 'Chinese': 16}}
2025-05-26 11:18:20,592 - utils - INFO - 创建文本相关特征...
2025-05-26 11:18:20,604 - utils - INFO - Feature engineering: Create text features - {'new_features': ['name_complexity', 'has_special_keyword', 'name_style', 'city_name_length', 'famous_food_city'], 'name_style_distribution': {'English': 647, 'European': 48}, 'famous_city_count': 200}
2025-05-26 11:18:20,604 - utils - INFO - 创建交互特征...
2025-05-26 11:18:20,607 - utils - INFO - Feature engineering: Create interaction features - {'new_features': ['stars_cuisine_interaction', 'price_continent_interaction', 'era_stars_interaction'], 'interaction_counts': {'stars_cuisine': 12, 'price_continent': 14, 'era_stars': 3}}
2025-05-26 11:18:20,608 - utils - INFO - 创建聚合特征...
2025-05-26 11:18:20,633 - utils - INFO - Feature engineering: Create aggregation features - {'city_features_added': 10, 'cuisine_features_added': 6, 'year_features_added': 2}
2025-05-26 11:18:20,633 - utils - INFO - 编码分类特征...
2025-05-26 11:18:20,653 - utils - INFO - Feature engineering: Encode categorical features - {'label_encoded_features': 13, 'one_hot_encoded_features': 51, 'low_cardinality_columns': ['price_category', 'cuisine_type', 'era', 'latitude_band', 'longitude_band', 'density_level', 'name_style', 'hemisphere', 'continent', 'climate_zone']}
2025-05-26 11:18:20,653 - utils - INFO - 标准化数值特征...
2025-05-26 11:18:20,666 - utils - INFO - Feature engineering: Scale numerical features - {'standardized_features': 17, 'normalized_features': 17, 'numerical_columns_processed': 17}
2025-05-26 11:18:20,667 - utils - INFO - 创建基于 stars 的目标编码特征...
2025-05-26 11:18:20,679 - utils - INFO - Feature engineering: Create target encoding - {'target_encoded_features': 5, 'target_column': 'stars', 'processed_columns': ['cuisine', 'city', 'region', 'cuisine_type', 'era']}
2025-05-26 11:18:20,679 - utils - INFO - Feature engineering: Feature engineering completed - {'original_shape': (695, 24), 'final_shape': (695, 157), 'features_added': 133, 'total_operations': 10}
2025-05-26 11:18:20,680 - utils - INFO - 分析特征重要性...
2025-05-26 11:18:20,726 - utils - INFO - 特征数据已保存: E:\作业\数据可视化\michelin-project\data\processed\features.joblib
2025-05-26 11:18:20,730 - utils - INFO - 特征转换器已保存: E:\作业\数据可视化\michelin-project\data\processed\transformers.joblib
2025-05-26 11:18:20,734 - utils - INFO - 特征工程报告已保存: E:\作业\数据可视化\michelin-project\data\processed\feature_engineering_report.json
2025-05-26 11:18:20,736 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\enhanced_features.pkl
2025-05-26 11:18:20,739 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\feature_transformers.pkl
2025-05-26 11:18:20,739 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\feature_analysis.pkl
2025-05-26 11:18:20,740 - utils - INFO - 特征工程流程完成!
2025-05-26 11:18:20,740 - utils - INFO - 原始特征数: 48
2025-05-26 11:18:20,740 - utils - INFO - 增强后特征数: 157
2025-05-26 11:18:20,740 - utils - INFO - 新增特征数: 109
2025-05-26 11:18:20,741 - utils - INFO - [完成] 特征工程完成，耗时: 0.25秒
2025-05-26 11:18:20,741 - utils - INFO - 
[步骤4] 聚类分析
2025-05-26 11:18:20,741 - utils - INFO - ----------------------------------------
2025-05-26 11:18:21,344 - utils - INFO - 开始聚类分析主流程...
2025-05-26 11:18:21,357 - utils - INFO - 加载特征数据: 695 条记录, 157 个特征
2025-05-26 11:18:21,358 - utils - INFO - 开始完整聚类分析流程...
2025-05-26 11:18:21,358 - utils - INFO - 准备聚类特征...
2025-05-26 11:18:21,368 - utils - INFO - Clustering: Prepare features - {'total_features_considered': 20, 'available_features': 20, 'selected_features': ['latitude_scaled', 'longitude_scaled', 'stars_scaled', 'price_numeric_scaled', 'year_scaled', 'years_since_award_scaled', 'distance_to_ny_scaled', 'city_restaurant_density_scaled', 'name_length_scaled', 'name_word_count_scaled'], 'data_shape': (695, 20)}
2025-05-26 11:18:21,369 - utils - INFO - 寻找最优聚类方案...
2025-05-26 11:18:21,369 - utils - INFO - 执行K-means聚类...
2025-05-26 11:18:21,963 - utils - INFO - K=2: 轮廓系数=0.277, CH指数=263.6
2025-05-26 11:18:22,024 - utils - INFO - K=3: 轮廓系数=0.297, CH指数=256.8
2025-05-26 11:18:22,087 - utils - INFO - K=4: 轮廓系数=0.280, CH指数=222.6
2025-05-26 11:18:22,152 - utils - INFO - K=5: 轮廓系数=0.283, CH指数=199.3
2025-05-26 11:18:22,224 - utils - INFO - K=6: 轮廓系数=0.276, CH指数=178.4
2025-05-26 11:18:22,304 - utils - INFO - K=7: 轮廓系数=0.242, CH指数=163.8
2025-05-26 11:18:22,380 - utils - INFO - K=8: 轮廓系数=0.240, CH指数=156.8
2025-05-26 11:18:22,458 - utils - INFO - K=9: 轮廓系数=0.241, CH指数=147.2
2025-05-26 11:18:22,542 - utils - INFO - K=10: 轮廓系数=0.248, CH指数=141.9
2025-05-26 11:18:22,542 - utils - INFO - Clustering: K-means clustering - {'k_range': '2-10', 'best_k': 3, 'best_silhouette_score': 0.29737644744627256, 'total_clusters_tested': 9}
2025-05-26 11:18:22,542 - utils - INFO - 执行DBSCAN聚类...
2025-05-26 11:18:22,638 - utils - INFO - DBSCAN eps=1.5, min_samples=3: 聚类数=45, 噪声比例=29.35%, 轮廓系数=0.395
2025-05-26 11:18:22,650 - utils - INFO - DBSCAN eps=1.5, min_samples=5: 聚类数=28, 噪声比例=41.87%, 轮廓系数=0.436
2025-05-26 11:18:22,657 - utils - INFO - Clustering: DBSCAN clustering - {'parameter_combinations_tested': 15, 'successful_combinations': 2, 'best_params': (1.5, 5), 'best_silhouette_score': 0.43611725323415335}
2025-05-26 11:18:22,658 - utils - INFO - 执行HDBSCAN聚类...
2025-05-26 11:18:22,715 - utils - INFO - HDBSCAN min_cluster_size=5: 聚类数=48, 噪声比例=22.16%, 轮廓系数=0.371
2025-05-26 11:18:22,761 - utils - INFO - HDBSCAN min_cluster_size=10: 聚类数=20, 噪声比例=38.42%, 轮廓系数=0.412
2025-05-26 11:18:22,796 - utils - INFO - HDBSCAN min_cluster_size=15: 聚类数=11, 噪声比例=30.36%, 轮廓系数=0.227
2025-05-26 11:18:22,828 - utils - INFO - HDBSCAN min_cluster_size=20: 聚类数=4, 噪声比例=28.06%, 轮廓系数=0.275
2025-05-26 11:18:22,861 - utils - INFO - HDBSCAN min_cluster_size=30: 聚类数=3, 噪声比例=20.72%, 轮廓系数=0.229
2025-05-26 11:18:22,861 - utils - INFO - Clustering: HDBSCAN clustering - {'min_cluster_sizes_tested': 5, 'successful_attempts': 5, 'best_min_cluster_size': 10, 'best_silhouette_score': 0.41238636599918066}
2025-05-26 11:18:22,861 - utils - INFO - Clustering: Find optimal clusters - {'algorithms_tested': ['kmeans', 'dbscan', 'hdbscan'], 'best_algorithm': 'dbscan', 'best_silhouette_score': 0.43611725323415335, 'total_experiments': 16}
2025-05-26 11:18:22,861 - utils - INFO - 分析聚类结果...
2025-05-26 11:18:22,912 - utils - INFO - Clustering: Analyze clusters - {'total_clusters': 28, 'noise_points': 291, 'largest_cluster_size': 291, 'smallest_cluster_size': 5}
2025-05-26 11:18:22,912 - utils - INFO - 创建聚类可视化...
2025-05-26 11:18:24,155 - utils - INFO - Clustering: Create visualizations - {'pca_explained_variance': '0.529', 'tsne_created': True, 'total_visualizations': 2}
2025-05-26 11:18:24,155 - utils - INFO - Clustering: Clustering process completed - {'best_algorithm': 'dbscan', 'total_experiments': 7, 'features_used': 20, 'analysis_completed': True}
2025-05-26 11:18:24,172 - utils - INFO - 聚类结果已保存: E:\作业\数据可视化\michelin-project\data\processed\clusters.joblib
2025-05-26 11:18:24,176 - utils - INFO - 聚类分析报告已保存: E:\作业\数据可视化\michelin-project\data\processed\clustering_report.json
2025-05-26 11:18:24,179 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\clustering_results.pkl
2025-05-26 11:18:24,179 - utils - INFO - 聚类分析流程完成!
2025-05-26 11:18:24,179 - utils - INFO - 最佳算法: dbscan
2025-05-26 11:18:24,179 - utils - INFO - 最佳轮廓系数: 0.436
2025-05-26 11:18:24,180 - utils - INFO - 聚类数: 28
2025-05-26 11:18:24,181 - utils - INFO - [完成] 聚类分析完成，耗时: 3.44秒
2025-05-26 11:18:24,181 - utils - INFO - 
[步骤5] 时间序列预测
2025-05-26 11:18:24,181 - utils - INFO - ----------------------------------------
2025-05-26 11:18:24,404 - utils - INFO - 开始预测分析主流程...
2025-05-26 11:18:24,409 - utils - INFO - 加载特征数据: 695 条记录, 157 个特征
2025-05-26 11:18:24,411 - utils - INFO - 开始完整预测分析流程...
2025-05-26 11:18:24,411 - utils - INFO - 准备时间序列数据...
2025-05-26 11:18:24,440 - utils - INFO - Forecasting: Prepare time series data - {'total_series': 4, 'series_names': ['total_awards', '1_star_awards', '2_star_awards', '3_star_awards'], 'date_range': '2019-2019', 'total_records': 695}
2025-05-26 11:18:24,440 - utils - INFO - 训练和验证 total_awards 模型...
2025-05-26 11:18:24,440 - utils - WARNING - 数据点太少，跳过 total_awards
2025-05-26 11:18:24,440 - utils - INFO - 训练和验证 1_star_awards 模型...
2025-05-26 11:18:24,441 - utils - WARNING - 数据点太少，跳过 1_star_awards
2025-05-26 11:18:24,441 - utils - INFO - 训练和验证 2_star_awards 模型...
2025-05-26 11:18:24,441 - utils - WARNING - 数据点太少，跳过 2_star_awards
2025-05-26 11:18:24,441 - utils - INFO - 训练和验证 3_star_awards 模型...
2025-05-26 11:18:24,442 - utils - WARNING - 数据点太少，跳过 3_star_awards
2025-05-26 11:18:24,442 - utils - INFO - 生成未来 5 年的预测...
2025-05-26 11:18:24,442 - utils - INFO - 分析预测洞察...
2025-05-26 11:18:24,443 - utils - INFO - Forecasting: Analyze insights - {'total_series_analyzed': 0, 'high_volatility_count': 0, 'declining_trends_count': 0, 'recommendations_generated': 0}
2025-05-26 11:18:24,443 - utils - INFO - Forecasting: Forecasting process completed - {'total_models_trained': 0, 'successful_forecasts': 0, 'forecast_period': '2026-2030', 'insights_generated': True}
2025-05-26 11:18:24,446 - utils - INFO - 预测结果已保存: E:\作业\数据可视化\michelin-project\data\processed\forecasts.joblib
2025-05-26 11:18:24,447 - utils - INFO - 预测模型已保存: E:\作业\数据可视化\michelin-project\data\processed\forecast_models.joblib
2025-05-26 11:18:24,452 - utils - INFO - 预测分析报告已保存: E:\作业\数据可视化\michelin-project\data\processed\forecast_report.json
2025-05-26 11:18:24,453 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\forecast_results.pkl
2025-05-26 11:18:24,454 - utils - INFO - Data cached to file: E:\作业\数据可视化\michelin-project\data\cache\forecast_models.pkl
2025-05-26 11:18:24,455 - utils - INFO - 预测分析流程完成!
2025-05-26 11:18:24,455 - utils - INFO - 成功训练 0 个预测模型
2025-05-26 11:18:24,455 - utils - INFO - 生成 0 个预测序列
2025-05-26 11:18:24,455 - utils - INFO - [完成] 时间序列预测完成，耗时: 0.27秒
2025-05-26 11:18:24,455 - utils - INFO - 
============================================================
2025-05-26 11:18:24,456 - utils - INFO - [成功] 数据处理流水线执行完成!
2025-05-26 11:18:24,456 - utils - INFO - 总耗时: 5.03秒 (0.1分钟)
2025-05-26 11:18:24,456 - utils - INFO - 完成时间: 2025-05-26 11:18:24
2025-05-26 11:18:24,456 - utils - INFO - ============================================================
2025-05-26 11:18:24,457 - utils - INFO - 
[文件] 生成的文件:
2025-05-26 11:18:24,458 - utils - INFO -   - clustering_report.json (0.02 MB)
2025-05-26 11:18:24,459 - utils - INFO -   - clusters.joblib (1.10 MB)
2025-05-26 11:18:24,459 - utils - INFO -   - features.joblib (0.63 MB)
2025-05-26 11:18:24,459 - utils - INFO -   - feature_engineering_report.json (0.03 MB)
2025-05-26 11:18:24,460 - utils - INFO -   - forecasts.joblib (0.00 MB)
2025-05-26 11:18:24,460 - utils - INFO -   - forecast_models.joblib (0.00 MB)
2025-05-26 11:18:24,462 - utils - INFO -   - forecast_report.json (0.00 MB)
2025-05-26 11:18:24,462 - utils - INFO -   - transformers.joblib (0.01 MB)
2025-05-26 11:18:24,463 - utils - INFO - 
[下一步] 现在可以启动后端API服务:
2025-05-26 11:18:24,463 - utils - INFO -   cd backend && python app.py
2025-05-26 11:18:24,463 - utils - INFO - 
[下一步] 然后启动前端应用:
2025-05-26 11:18:24,463 - utils - INFO -   cd frontend && npm install && npm run dev
2025-05-30 00:46:35,395 - scripts.utils - INFO - 目录准备完成: E:\作业\数据可视化\michelin-visualization\data\processed
2025-05-30 00:46:35,396 - scripts.utils - INFO - 目录准备完成: E:\作业\数据可视化\michelin-visualization\data\output
2025-05-30 00:46:35,397 - scripts.utils - INFO - 从E:\作业\数据可视化\michelin-visualization\data\raw加载米其林餐厅数据
2025-05-30 00:46:35,426 - scripts.utils - INFO - 从one-star-michelin-restaurants.csv加载了549条餐厅记录
2025-05-30 00:46:35,431 - scripts.utils - INFO - 从two-stars-michelin-restaurants.csv加载了110条餐厅记录
2025-05-30 00:46:35,435 - scripts.utils - INFO - 从three-stars-michelin-restaurants.csv加载了36条餐厅记录
2025-05-30 00:46:35,437 - scripts.utils - INFO - 合并数据集包含695条餐厅记录
2025-05-30 00:46:35,438 - scripts.utils - INFO - 开始预处理695条餐厅数据
2025-05-30 00:46:35,452 - scripts.utils - INFO - 已创建价格级别(price_level)列
2025-05-30 00:46:35,463 - scripts.utils - INFO - 数据预处理完成，最终数据集包含695条记录
